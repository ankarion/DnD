
![[Avell.png]]

```dataviewjs
let lvlUpRules = [200, 400, 700, 1000, 1300, 1800, 2300, 2800, 3500, 4200, 4900, 5600, 6500, 7400, 8300, 9200, 10300, 11400, 12500, 13600];

function calculateLvL(lvlUpRules,exp){
	let lvl=1;
	for (let requiredExp of lvlUpRules){
		if (exp<requiredExp) {return lvl;}
		else lvl+=1;
	}
}

function flatten(list){
	let result = [];
	for(let element of list){
		if (typeof(element)!=typeof(result)){
			result.push(element);
		}
		else {
			result.push(...element);
		}
	}
	return(result);
}

let adventures = dv.pages().where(note=>note.file.folder==dv.current().file.folder);
let rewards = flatten(adventures.rewards);

let exp = rewards.filter((t)=>t.split("–æ–ø").length>1);
exp = exp.map((t)=>parseInt(t.split("–æ–ø")[0]));
exp = exp.reduce((acc, val) => acc + val, 0);

let lvl = calculateLvL(lvlUpRules,exp);

let gp = rewards.filter((t)=>t.split("–∑–º").length>1);
gp = gp.map((t)=>parseInt(t.split("–∑–º")[0]));
gp = gp.reduce((acc, val) => acc + val, 0);

let food = rewards.filter((t)=>t.split("—Å—É—Ö–ø–∞–π").length>1);
food = food.map((t)=>parseInt(t.split("—Å—É—Ö–ø–∞–π")[0]));
food = food.reduce((acc, val) => acc + val, 0);

dv.span(
        "**–£—Ä–æ–≤–µ–Ω—å:** "+lvl+"("+exp+"/"+lvlUpRules[lvl-1]+") "
        + "![progress](https://progress-bar.dev/"
        + parseInt((exp / lvlUpRules[lvl-1]) * 100)
        + "/)"
    )
dv.paragraph("**–ó–æ–ª–æ—Ç–æü™ô:** "+gp+" –∑–º")
dv.paragraph("**–ï–¥–∞üçñ:** "+food+" —Å—É—Ö–ø–∞–π")
```

> [!info]- –†–µ–ø—É—Ç–∞—Ü–∏—è
> 
> | Fraction | –†–µ–ø—É—Ç–∞—Ü–∏—è | ‚úâÔ∏è |
> | ---- | ---- | ---- |
> | –ê—Ä—Ö–µ–æ–ª–æ–≥–∏ | `$= dv.pages().where(page => page.fraction && page.fraction=="–∞—Ä—Ö–µ–æ–ª–æ–≥–∏"&& (page.file.folder==dv.current().file.folder)).length` |  |
> | –ú–∞–≥–∏ | `$= dv.pages().where(page => page.fraction=="–º–∞–≥–∏"&& (page.file.folder==dv.current().file.folder)).length` |  |
> | –ù–∞–µ–º–Ω–∏–∫–∏ | `$= dv.pages().where(page => page.fraction=="–Ω–∞–µ–º–Ω–∏–∫–∏"&& (page.file.folder==dv.current().file.folder)).length` |  |
> | –°—É–¥–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª–∏ | `$= dv.pages().where(page => page.fraction=="—Å—É–¥–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª–∏"&& (page.file.folder==dv.current().file.folder)).length` |  |
> | –ü–ª–æ—Ç–Ω–∏–∫–∏ | `$= dv.pages().where(page => page.fraction=="–ø–ª–æ—Ç–Ω–∏–∫–∏"&& (page.file.folder==dv.current().file.folder)).length` |  |
> | –ú–µ—Ç–∞–ª–ª—É—Ä–≥–∏ | `$= dv.pages().where(page => page.fraction=="–º–µ—Ç–∞–ª–ª—É—Ä–≥–∏"&& (page.file.folder==dv.current().file.folder)).length` |  |

> [!warning]- üìñ–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è
> ```dataview
> table without id
> file.link as source,
> sum(number(filter(rewards, (t)=>contains(t, "–æ–ø")))) as –æ–ø,
> sum(number(filter(rewards, (t)=>contains(t, "–∑–º")))) as –∑–º
> from "CompaignTwo"
> where rewards and this.file.folder=file.folder
> sort file.link desc
> ```

> [!quote]- üéí–ü—Ä–µ–¥–º–µ—Ç—ã
> ```dataviewjs
> // This regex will find the contents of a specifically formatted callout
> const regex = />\s\[\!inventory\]-\s(.+?)((\n>\s.*?)*)\n/
> let adventures = dv.pages().where(note=>note.file.folder==dv.current().file.folder);
> let rows = []
> for (const page of adventures){
> 	const file = app.vault.getAbstractFileByPath(page.file.path)
> 	// Read the file contents
> 	const contents = await app.vault.read(file)	
> 	for (const callout of contents.match(new RegExp(regex, 'sg')) || []) {
> 		const match = callout.match(new RegExp(regex, 's')) 
> 		rows.push([match[1], match[2], page.file.link])
> 	}
> }
> dv.table(['Term', 'Definition', 'Source'], rows)
> ```

> [!about] ü™û –í–Ω–µ—à–Ω–æ—Å—Ç—å
> –ß–µ–ª–æ–≤–µ–∫ —Å –≤–∞–π–±–æ–º —Å—É–º–∞—Å—à–µ–¥—à–µ–≥–æ —É—á–µ–Ω–æ–≥–æ –∞–ª—Ö–∏–º–∏–∫–∞ —Å–æ —Å–≤–µ—Ç–ª—ã–º–∏ —Ä–∞—Å—Ç—Ä–µ–ø–∞–Ω–Ω—ã–º–∏ –∫–æ—Ä–æ—Ç–∫–∏–º–∏ –≤–æ–ª–æ—Å–∞–º–∏, —â–µ—Ç–∏–Ω–æ–π, —Ä–æ—Å—Å—ã–ø—å—é –≤–µ—Å–Ω—É—à–µ–∫, –∫—É—á–µ–π —Å—Ç–∞—Ä—ã—Ö –Ω–µ–∫—Ä–æ—Ç–∏—á–µ—Å–∫–∏—Ö —à—Ä–∞–º–æ–≤ –∏ –≥–æ–ª—É–±—ã–º–∏ –≥–ª–∞–∑–∞–º–∏. –ù–∞ —à–µ–µ —Ç–æ—Ç–µ–º –º–µ–¥–≤–µ–¥—è
> ---
> > [!info]- –ë–æ–ª—å—à–µ
> > –î–æ–≤–æ–ª—å–Ω–æ –º–æ–ª–æ–¥–æ–π —á–µ–ª–æ–≤–µ–∫, –≤–∏–¥–Ω–∞ –∫—É—á–∞ –∫–æ–ª–±–æ—á–µ–∫ —Å –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–º —Ç—Ä–∞–≤–∞–º–∏, —ç–ª–µ–∫—Å–∏—Ä–∞–º–∏ –¥–∞ –∏ –≤ —Ü–µ–ª–æ–º —Å –≤–∞–π–±–æ–º —Å—É–º–∞—Å—à–µ–¥—à–µ–≥–æ —É—á–µ–Ω–æ–≥–æ –∞–ª—Ö–∏–º–∏–∫–∞. –ö–∞–∫–æ–π –ª–∏–±–æ –±—Ä–æ–Ω–∏ –Ω–µ –≤–∏–¥–Ω–æ, —Ç–æ–ª—å–∫–æ –∂–µ–ª–µ–∑–Ω—ã–π —â–∏—Ç –Ω–∞ —Å–ø–∏–Ω–µ –≤–∏—Å–∏—Ç. –û—Ä—É–∂–∏—è —Ç–æ–∂–µ –Ω–∏–∫–∞–∫–æ–≥–æ. –í —Ä—É–∫–∞—Ö –æ–≥—Ä–æ–º–Ω–∞—è —Å—É–º–∫–∞ –ª–µ–∫–∞—Ä—è.

# TODO list
```dataview
task from "CompaignTwo" where !completed
```
